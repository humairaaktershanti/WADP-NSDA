{% extends 'master/base.html' %}

{% block content %}
<div class="page-wrapper">
    <div class="content container-fluid">

        <!-- Page Header -->
        <div class="page-header d-flex justify-content-between align-items-center mb-4">
            <h3 class="page-title">Attendance Dashboard</h3>
            {% if user.user_types == 'Admin' %}
            <a href="{% url 'add_attendance' %}" class="btn btn-primary">Add Attendance</a>
            {% endif %}
        </div>
        <!-- Search Filter -->
					<div class="row filter-row">
						<div class="col-sm-3">  
							<div class="input-block mb-3 form-focus">
								<div class="cal-icon">
									<input type="text" class="form-control floating datetimepicker">
								</div>
								<label class="focus-label">Date</label>
							</div>
						</div>
						<div class="col-sm-3"> 
							<div class="input-block mb-3 form-focus select-focus">
								<select class="select floating"> 
									<option>-</option>
									<option>Jan</option>
									<option>Feb</option>
									<option>Mar</option>
									<option>Apr</option>
									<option>May</option>
									<option>Jun</option>
									<option>Jul</option>
									<option>Aug</option>
									<option>Sep</option>
									<option>Oct</option>
									<option>Nov</option>
									<option>Dec</option>
								</select>
								<label class="focus-label">Select Month</label>
							</div>
						</div>
						<div class="col-sm-3"> 
							<div class="input-block mb-3 form-focus select-focus">
								<select class="select floating"> 
									<option>-</option>
									<option>2019</option>
									<option>2018</option>
									<option>2017</option>
									<option>2016</option>
									<option>2015</option>
								</select>
								<label class="focus-label">Select Year</label>
							</div>
						</div>
						<div class="col-sm-3">  
							<div class="d-grid">
								<a href="#" class="btn btn-success"> Search </a>  
							</div>
						</div>     
                    </div>
					<!-- /Search Filter -->
        <div class="row">
            
            <div class="col-lg-12">
							<div class="table-responsive">
								<table class="table table-striped custom-table mb-0">
									<thead>
										<tr>
											<th>#</th>
											<th>Date </th>
											<th>Punch In</th>
											<th>Punch Out</th>
											<th>Production</th>
                                            {% if user.user_types == 'Admin' %}
											<th>Action</th>
                                            {% endif %}
										</tr>
									</thead>
									<tbody>
										{% for att in attendances %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>{{ att.date|date:"d M Y" }}</td>
                                            <td>{{ att.check_in|time:"h:i A"|default:"-" }}</td>
                                            <td>{{ att.check_out|time:"h:i A"|default:"-" }}</td>
                                            <td>{{ att.work_duration|default:"0" }} hrs</td>
                                            {% if user.user_types == 'Admin' %}
                                            <td>
                                                <a href="{% url 'edit_attendance' att.pk %}" class="btn btn-sm btn-info">Update</a>
                                                <a href="{% url 'delete_attendance' att.pk %}" class="btn btn-sm btn-danger">Delete</a>
                                            </td>
                                            {% endif %}
                                        </tr>
                                        {% empty %}
                                        <tr>
                                            <td colspan="7" class="text-center text-muted">No attendance records found.</td>
                                        </tr>
                                        {% endfor %}
									</tbody>
								</table>
							</div>
                        </div>
                    </div>

    </div>
</div>

<!-- Optional Timeline CSS -->
<style>
.timeline { list-style: none; padding-left: 0; }
.timeline-item { position: relative; padding: 10px 0; border-left: 2px solid #dee2e6; margin-left: 10px; }
.timeline-item span.badge { position: absolute; left: -75px; top: 10px; }
</style>

{% endblock %}
