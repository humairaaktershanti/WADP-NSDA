{% extends 'AuthApp/master.html' %}

{% block title %}HR Dashboard - InstraCore{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 col-lg-2 sidebar d-md-block">
            <div class="position-sticky pt-3">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="{% url 'hr_dashboard' %}">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-people"></i> Employees
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-briefcase"></i> Job Posts
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-person-plus"></i> Applications
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-calendar-event"></i> Interviews
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-file-earmark-text"></i> Reports
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Main Dashboard Content -->
        <div class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">HR Dashboard</h1>
                <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group me-2">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Print</button>
                    </div>
                    <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#addJobModal">
                        <i class="bi bi-plus-circle"></i> Post Job
                    </button>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="row mb-4">
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stat-card">
                        <i class="bi bi-people"></i>
                        <h3>85</h3>
                        <p class="text-muted">Total Employees</p>
                        <div class="d-flex justify-content-between">
                            <span>Active: 82</span>
                            <span>Inactive: 3</span>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stat-card">
                        <i class="bi bi-briefcase"></i>
                        <h3>12</h3>
                        <p class="text-muted">Active Job Posts</p>
                        <div class="d-flex justify-content-between">
                            <span>Open: 8</span>
                            <span>Closed: 4</span>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stat-card">
                        <i class="bi bi-person-plus"></i>
                        <h3>45</h3>
                        <p class="text-muted">Applications</p>
                        <div class="d-flex justify-content-between">
                            <span>Pending: 25</span>
                            <span>Reviewed: 20</span>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stat-card">
                        <i class="bi bi-calendar-event"></i>
                        <h3>8</h3>
                        <p class="text-muted">Scheduled Interviews</p>
                        <div class="d-flex justify-content-between">
                            <span>Today: 3</span>
                            <span>This Week: 5</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="row mb-4">
                <div class="col-lg-8 mb-4">
                    <div class="card dashboard-card">
                        <div class="card-header">
                            <h5 class="mb-0">Applications by Job Post</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="applicationsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="card dashboard-card">
                        <div class="card-header">
                            <h5 class="mb-0">Employee Distribution</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="employeeDistChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activities and Upcoming Interviews -->
            <div class="row">
                <div class="col-lg-6 mb-4">
                    <div class="card dashboard-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Recent Activities</h5>
                            <a href="#" class="btn btn-sm btn-light">View All</a>
                        </div>
                        <div class="card-body">
                            <div class="timeline">
                                <div class="timeline-item">
                                    <h6>New application received</h6>
                                    <p class="text-muted mb-1">John Doe applied for "Web Developer" position</p>
                                    <small class="text-muted">2 hours ago</small>
                                </div>
                                <div class="timeline-item">
                                    <h6>Interview scheduled</h6>
                                    <p class="text-muted mb-1">Interview with Sarah Johnson scheduled for tomorrow</p>
                                    <small class="text-muted">5 hours ago</small>
                                </div>
                                <div class="timeline-item">
                                    <h6>Job post closed</h6>
                                    <p class="text-muted mb-1">"Data Scientist" position closed after hiring</p>
                                    <small class="text-muted">1 day ago</small>
                                </div>
                                <div class="timeline-item">
                                    <h6>New employee onboarded</h6>
                                    <p class="text-muted mb-1">Michael Smith joined as "Python Developer"</p>
                                    <small class="text-muted">2 days ago</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 mb-4">
                    <div class="card dashboard-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Upcoming Interviews</h5>
                            <span class="badge bg-danger">8</span>
                        </div>
                        <div class="card-body">
                            <div class="list-group">
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">John Doe - Web Developer</h6>
                                        <small>Today, 10:00 AM</small>
                                    </div>
                                    <p class="mb-1">Interview Panel: HR, Tech Lead</p>
                                    <div class="d-flex justify-content-between">
                                        <span class="badge bg-primary">Scheduled</span>
                                        <button class="btn btn-sm btn-outline-primary">View Details</button>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Sarah Johnson - Data Scientist</h6>
                                        <small>Today, 2:00 PM</small>
                                    </div>
                                    <p class="mb-1">Interview Panel: HR, Data Team Lead</p>
                                    <div class="d-flex justify-content-between">
                                        <span class="badge bg-primary">Scheduled</span>
                                        <button class="btn btn-sm btn-outline-primary">View Details</button>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Michael Brown - UI/UX Designer</h6>
                                        <small>Tomorrow, 11:00 AM</small>
                                    </div>
                                    <p class="mb-1">Interview Panel: HR, Design Lead</p>
                                    <div class="d-flex justify-content-between">
                                        <span class="badge bg-primary">Scheduled</span>
                                        <button class="btn btn-sm btn-outline-primary">View Details</button>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Job Modal -->
<div class="modal fade" id="addJobModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Post New Job</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row">
                        <div class="col-md-8 mb-3">
                            <label for="jobTitle" class="form-label">Job Title</label>
                            <input type="text" class="form-control" id="jobTitle" placeholder="Enter job title" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="jobDepartment" class="form-label">Department</label>
                            <select class="form-select" id="jobDepartment" required>
                                <option value="">Select department</option>
                                <option value="faculty">Faculty</option>
                                <option value="hr">HR</option>
                                <option value="finance">Finance</option>
                                <option value="it">IT</option>
                                <option value="marketing">Marketing</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="jobLocation" class="form-label">Location</label>
                            <input type="text" class="form-control" id="jobLocation" placeholder="Enter job location" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="jobType" class="form-label">Job Type</label>
                            <select class="form-select" id="jobType" required>
                                <option value="">Select job type</option>
                                <option value="full-time">Full Time</option>
                                <option value="part-time">Part Time</option>
                                <option value="contract">Contract</option>
                                <option value="internship">Internship</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="jobDescription" class="form-label">Job Description</label>
                        <textarea class="form-control" id="jobDescription" rows="4" placeholder="Enter job description" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="jobRequirements" class="form-label">Requirements</label>
                        <textarea class="form-control" id="jobRequirements" rows="4" placeholder="Enter job requirements" required></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="jobSalary" class="form-label">Salary Range</label>
                            <input type="text" class="form-control" id="jobSalary" placeholder="e.g., $50,000 - $70,000">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="jobDeadline" class="form-label">Application Deadline</label>
                            <input type="date" class="form-control" id="jobDeadline" required>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Post Job</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
    // Applications Chart
    const applicationsCtx = document.getElementById('applicationsChart').getContext('2d');
    const applicationsChart = new Chart(applicationsCtx, {
        type: 'bar',
        data: {
            labels: ['Web Developer', 'Data Scientist', 'UI/UX Designer', 'Python Developer', 'Marketing Manager'],
            datasets: [{
                label: 'Applications Received',
                data: [15, 12, 8, 6, 4],
                backgroundColor: '#3a86ff',
                borderColor: '#3a86ff',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Employee Distribution Chart
    const employeeDistCtx = document.getElementById('employeeDistChart').getContext('2d');
    const employeeDistChart = new Chart(employeeDistCtx, {
        type: 'doughnut',
        data: {
            labels: ['Faculty', 'HR', 'Finance', 'IT', 'Marketing', 'Other'],
            datasets: [{
                data: [25, 8, 10, 15, 12, 15],
                backgroundColor: [
                    '#3a86ff',
                    '#8338ec',
                    '#ff006e',
                    '#fb5607',
                    '#ffbe0b',
                    '#8ac926'
                ],
                hoverOffset: 4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                }
            }
        }
    });
</script>
{% endblock %}